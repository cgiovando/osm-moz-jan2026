# Mozambique Flood Response - OSM Mapping Visualization

Interactive visualization of coordinated OpenStreetMap mapping efforts in response to the January 2026 Mozambique floods.

## Live Demo

**[View the interactive map](https://cgiovando.github.io/osm-moz-jan2026/)**

## Overview

In January 2026, severe flooding affected over 600,000 people in Mozambique, with Gaza, Sofala, and Maputo provinces hit hardest. This visualization shows the rapid coordinated mapping response by the OpenStreetMap community.

### Key Statistics

- **51,000+** features mapped (and growing)
- **230+** contributors
- **13,000+** peak day edits (January 25, 2026)
- Date range: January 23, 2026 onwards (flood response period)
- **Data updated daily at 00:00 UTC**

## Features

- **Hourly Timeline**: Detailed bar chart showing mapping activity by hour with day separators
- **Animated Playback**: Watch the mapping effort unfold over time with new features flashing yellow as they appear
- **Dynamic Stats Overlay**: Live counter showing features mapped, with date/time display during animation
- **Top Contributors**: Expandable list showing top 20 OSM mappers and their contribution counts
- **Zoom-Adaptive Buildings**: Buildings shown as dots at low zoom, detailed polygons at high zoom - visible at all zoom levels
- **Layer Toggles**: Show/hide buildings, highways, waterways, and HOT project boundaries
- **Basemap Switcher**: Choose between CARTO Dark, CARTO Light, OSM Humanitarian, or ESRI Satellite
- **Overview Map**: Mini locator map showing current viewport location within Mozambique
- **HOT Project Boundaries**: Overlay of Humanitarian OpenStreetMap Team Tasking Manager projects
- **Data Downloads**: Download GeoJSON, PMTiles, and JSON data directly from the interface
- **URL Hash**: Shareable URLs with zoom/lat/lng parameters

## Technology

- **[MapLibre GL JS](https://maplibre.org/)**: Open-source map rendering
- **[PMTiles](https://github.com/protomaps/PMTiles)**: Efficient single-file tile archive format
- **[CARTO Dark Basemap](https://carto.com/basemaps/)**: Background map tiles

## Data Sources

- **OSM Features**: Extracted via [Overpass API](https://overpass-api.de/) with contribution metadata (timestamps, users, changesets)
- **HOT Projects**: Fetched from [HOT Tasking Manager API](https://tasks.hotosm.org/)

### HOT Projects

HOT Tasking Manager projects are discovered dynamically by searching for Mozambique flood/cyclone/emergency projects created after January 15, 2026. New projects are automatically included in the visualization.

## Automated Updates

This visualization updates automatically every day at **00:00 UTC** via GitHub Actions.

### How it works

1. **Incremental OSM updates**: Only fetches changes since the last update, making updates fast and efficient
2. **Dynamic HOT project discovery**: Searches for new Mozambique flood-related projects on the HOT Tasking Manager
3. **Automatic data processing**: Regenerates PMTiles, building centroids, and statistics
4. **Auto-commit**: Changes are committed and deployed to GitHub Pages

### Manual refresh

To trigger a manual update or force a full data refresh:
1. Go to [Actions](../../actions) â†’ "Update Map Data"
2. Click "Run workflow"
3. Optionally check "Full data refresh" to ignore incremental updates

## Files

| File | Description |
|------|-------------|
| `index.html` | Interactive web visualization (MapLibre GL JS) |
| `mozambique_flood_mapping.geojson` | OSM features with timestamps and contributor info |
| `mozambique_flood_mapping.pmtiles` | OSM features as PMTiles for efficient tile serving |
| `building_centroids.geojson` | Pre-computed building centroids for fast low-zoom rendering |
| `hot_projects.geojson` | HOT Tasking Manager project boundaries |
| `mozambique_mapping_stats.json` | Aggregated mapping statistics (hourly and daily) |
| `extract_mozambique_osm.py` | Python script to extract OSM data (supports incremental updates) |
| `fetch_hot_projects.py` | Python script to dynamically discover HOT project boundaries |
| `compute_centroids.py` | Python script to generate building centroids |
| `.github/workflows/update-data.yml` | GitHub Actions workflow for automated daily updates |

## References

- [UN OCHA Flash Update - Mozambique Floods](https://reliefweb.int/report/mozambique/flash-update-no5-heavy-rains-and-floods-central-and-southern-mozambique-26-january-2026)
- [HOT Tasking Manager - Mozambique Projects](https://tasks.hotosm.org/explore?text=mozambique)
- [OpenStreetMap](https://www.openstreetmap.org/)

## AI-Generated Code Disclaimer

**The majority of this application's code was generated with assistance from AI tools.**

### Tools Used
- **Claude** (Anthropic) - Code generation, debugging, and documentation

### What This Means
- The codebase was largely generated by AI based on requirements and prompts
- All functionality has been tested and verified to work as intended
- Features have undergone human review for usability and correctness

### What This Doesn't Mean
- This is not a traditional hand-coded application
- The code may not have undergone line-by-line professional developer review

### Transparency
This disclosure is made in adherence to emerging best practices for transparency in AI-assisted software development. We believe in being upfront about how this application was created.

## License

Data: [ODbL](https://opendatacommons.org/licenses/odbl/) (OpenStreetMap data)
Code: MIT
